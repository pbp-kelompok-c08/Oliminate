{% extends 'base.html' %}
{% block title %}{{ schedule.team1 }} vs {{ schedule.team2 }}{% endblock %}

{% block content %}
<div class="container mt-8">
  <div class="card" style="padding: 0; overflow: hidden;">
    {% if schedule.image_url %}
      <img
        src="{{ schedule.image_url }}"
        alt="{{ schedule.category }}"
        style="
          width: 100%;
          height: 300px; 
          object-fit: cover; 
          border-bottom: 1px solid var(--neutral-100);
        "
      />
    {% endif %}

    <div style="padding: 24px;">
      <h1 class="h3" style="margin-bottom: 8px;">
        {{ schedule.team1 }} vs {{ schedule.team2 }}
      </h1>
      <p class="headline" style="margin-bottom: 4px;">
        {{ schedule.category }} â€” {{ schedule.location }}
      </p>
      <p class="footnote" style="margin-bottom: 16px; color: var(--neutral-700);">
        {{ schedule.date|date:"l, d M Y" }} | Waktu : {{ schedule.time|time:"H:i" }}
      </p>

      {% if schedule.caption %}
        <p class="body-large" style="margin-bottom: 16px;">
          {{ schedule.caption }}
        </p>
      {% endif %}

      {% if schedule.organizer %}
        <p class="footnote" style="color: var(--neutral-700);">
          Diselenggarakan oleh: {{ schedule.organizer.username }}
        </p>
      {% endif %}

      <div class="flex gap-2 mt-6">
        <a href="{% url 'scheduling:schedule_list' %}" class="btn btn-outline">Kembali</a>

        {% if user.is_authenticated and user == schedule.organizer %}
          <button
          class="editBtn btn btn-primary"
          data-id="${s.id}"
          data-category="${s.category ?? ''}"
          data-location="${s.location ?? ''}"
          data-team1="${s.team1 ?? ''}"
          data-team2="${s.team2 ?? ''}"
          data-date="${s.date ?? ''}"
          data-time="${s.time ?? ''}"
          data-image_url="${s.image_url ?? ''}"
          data-caption="${(s.caption ?? '').replace(/"/g, '&quot;')}"
        >Edit</button>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<script>
  listEl.addEventListener('click', (e) => {
    const editBtn = e.target.closest('.editBtn');
    if (editBtn) {
      openFormModal('edit', {
        id: editBtn.dataset.id,
        category:  editBtn.dataset.category,
        location:  editBtn.dataset.location,
        team1:     editBtn.dataset.team1,
        team2:     editBtn.dataset.team2,
        date:      editBtn.dataset.date,
        time:      editBtn.dataset.time,
        image_url: editBtn.dataset.image_url,
        caption:   editBtn.dataset.caption,
      });
      return;
    }
  });
</script>
{% endblock %}
